# √çndice de Documentaci√≥n de Ll√©vateloExpress

Este archivo sirve como punto central de referencia para toda la documentaci√≥n del proyecto Ll√©vateloExpress.

## üÜï Actualizaciones Importantes

### An√°lisis Completo del Sistema (Enero 2025)
- **Mapa de Flujo de Procesos**: An√°lisis exhaustivo de la arquitectura y procesos ‚úÖ
- **Estado Actual del Sistema**: Evaluaci√≥n detallada del estado de producci√≥n ‚úÖ
- **Documentaci√≥n t√©cnica actualizada** con an√°lisis desde el VPS (fuente de verdad)

### Migraci√≥n a UTF8 (26 de Mayo 2025)
- **Base de datos migrada exitosamente de LATIN1 a UTF8**
- **Soporte completo para caracteres especiales del espa√±ol** (acentos, √±, signos)
- **Ver detalles completos en:** [MIGRACION_UTF8_DOCUMENTACION.md](MIGRACION_UTF8_DOCUMENTACION.md)

## Documentos Principales

### 1. [MAPA_FLUJO_PROCESOS_LLEVATELOEXPRESS.md](MAPA_FLUJO_PROCESOS_LLEVATELOEXPRESS.md) üÜï
- **Prop√≥sito**: Mapa completo del flujo de procesos y arquitectura del sistema
- **Contenido**: Diagramas de flujo, arquitectura, API, frontend, backend, base de datos
- **Uso**: Documento de referencia principal para comprender el sistema completo
- **√öltima actualizaci√≥n**: Enero 2025

### 2. [ESTADO_ACTUAL_SISTEMA_LLEVATELOEXPRESS.md](ESTADO_ACTUAL_SISTEMA_LLEVATELOEXPRESS.md) üÜï
- **Prop√≥sito**: An√°lisis detallado del estado actual del sistema en producci√≥n
- **Contenido**: Stack tecnol√≥gico, configuraci√≥n, funcionalidades, √°reas de mejora
- **Uso**: Evaluaci√≥n t√©cnica y planificaci√≥n de mejoras
- **√öltima actualizaci√≥n**: Enero 2025

### 3. [README.md](README.md)
- **Prop√≥sito**: Introducci√≥n general al proyecto
- **Contenido**: Caracter√≠sticas, tecnolog√≠as, configuraci√≥n b√°sica, estructura del proyecto
- **Uso**: Lectura inicial para cualquier persona que se une al proyecto
- **√öltima actualizaci√≥n**: Mayo 2025

### 4. [PROTOCOLOS_GIT_Y_DESPLIEGUE.md](PROTOCOLOS_GIT_Y_DESPLIEGUE.md)
- **Prop√≥sito**: Gu√≠a completa para la gesti√≥n del c√≥digo y despliegue
- **Contenido**: Flujo de trabajo Git, procedimientos de despliegue, sincronizaci√≥n
- **Uso**: Referencia obligatoria antes de realizar cambios en el c√≥digo o desplegar
- **√öltima actualizaci√≥n**: Mayo 2025

### 5. [ADMIN_FIX_INSTRUCCIONES.md](ADMIN_FIX_INSTRUCCIONES.md)
- **Prop√≥sito**: Soluci√≥n para problemas espec√≠ficos con el panel de administraci√≥n
- **Contenido**: Diagn√≥stico y pasos para resolver problemas con el admin de Django
- **Uso**: Cuando el panel de administraci√≥n no funciona correctamente
- **√öltima actualizaci√≥n**: Mayo 2025

### 6. [API_DOCUMENTACION.md](API_DOCUMENTACION.md)
- **Prop√≥sito**: Documentaci√≥n completa de la API REST
- **Contenido**: Descripci√≥n de endpoints, par√°metros, respuestas y ejemplos de uso
- **Uso**: Para desarrolladores frontend y terceros que necesiten interactuar con la API
- **√öltima actualizaci√≥n**: Mayo 2025

## Documentos Espec√≠ficos

### 7. [scripts/syncronizacion.md](scripts/syncronizacion.md)
- **Prop√≥sito**: Detalles sobre los scripts de sincronizaci√≥n
- **Contenido**: Explicaci√≥n detallada de los scripts para mantener sincronizados los repositorios
- **Uso**: Para entender en detalle c√≥mo funcionan los scripts de sincronizaci√≥n
- **√öltima actualizaci√≥n**: Mayo 2025

### 8. [MIGRACION_UTF8_DOCUMENTACION.md](MIGRACION_UTF8_DOCUMENTACION.md)
- **Prop√≥sito**: Documentaci√≥n de la migraci√≥n de base de datos a UTF-8
- **Contenido**: Proceso completo de migraci√≥n, problemas encontrados y soluciones
- **Uso**: Referencia hist√≥rica y gu√≠a para futuras migraciones
- **√öltima actualizaci√≥n**: Mayo 2025

## Documentos en Desuso o Duplicados

Los siguientes documentos contienen informaci√≥n que ya est√° integrada en documentos m√°s recientes:

- **GIT_WORKFLOW.md**: La informaci√≥n ahora est√° en PROTOCOLOS_GIT_Y_DESPLIEGUE.md
- **DEPLOYMENT_PROTOCOL.md**: La informaci√≥n ahora est√° en PROTOCOLOS_GIT_Y_DESPLIEGUE.md

## An√°lisis T√©cnico Detallado

Para obtener una comprensi√≥n completa del sistema Ll√©vateloExpress, recomendamos leer los documentos en este orden:

1. **üìñ Introducci√≥n**: [README.md](README.md) - Visi√≥n general del proyecto
2. **üó∫Ô∏è Arquitectura**: [MAPA_FLUJO_PROCESOS_LLEVATELOEXPRESS.md](MAPA_FLUJO_PROCESOS_LLEVATELOEXPRESS.md) - Flujos y procesos
3. **üîç Estado Actual**: [ESTADO_ACTUAL_SISTEMA_LLEVATELOEXPRESS.md](ESTADO_ACTUAL_SISTEMA_LLEVATELOEXPRESS.md) - An√°lisis detallado
4. **üîß API**: [API_DOCUMENTACION.md](API_DOCUMENTACION.md) - Especificaci√≥n t√©cnica
5. **‚öôÔ∏è Operaciones**: [PROTOCOLOS_GIT_Y_DESPLIEGUE.md](PROTOCOLOS_GIT_Y_DESPLIEGUE.md) - Procedimientos

## Flujo de Documentaci√≥n

Para mantener la documentaci√≥n actualizada y coherente:

1. Cualquier cambio en procedimientos debe reflejarse primero en el documento principal correspondiente
2. Actualizar la fecha de "√öltima actualizaci√≥n" cada vez que se modifique un documento
3. Si se crea un nuevo documento, a√±adirlo a este √≠ndice
4. Si se detecta informaci√≥n contradictoria, dar prioridad al documento con la fecha m√°s reciente
5. Los an√°lisis del sistema deben realizarse desde el VPS (fuente de verdad)

## Responsables de Documentaci√≥n

La documentaci√≥n es mantenida por el equipo de desarrollo de Ll√©vateloExpress.

Para cualquier consulta o sugerencia sobre la documentaci√≥n, contactar a:
- Email: rubenbolivar@gmail.com

---

√öltima actualizaci√≥n: Enero 2025 

# Documentaci√≥n del Sistema Ll√©vateloExpress

## √çndice de Contenido

1. [Introducci√≥n](#introducci√≥n)
2. [Registro e Inicio de Sesi√≥n](#registro-e-inicio-de-sesi√≥n)
3. [Panel de Usuario](#panel-de-usuario)
4. [Calculadora de Financiamiento](#calculadora-de-financiamiento)
5. [Solicitud de Financiamiento](#solicitud-de-financiamiento)
6. [Preguntas Frecuentes](#preguntas-frecuentes)

## Introducci√≥n

Ll√©vateloExpress es una plataforma para financiamiento y adquisici√≥n de veh√≠culos, motocicletas, camiones, maquinaria agr√≠cola y equipos industriales en Venezuela. Esta documentaci√≥n explica el uso de la plataforma tanto desde la perspectiva del usuario final como del desarrollador.

## Registro e Inicio de Sesi√≥n

### Proceso de Registro

Para registrarse como usuario de Ll√©vateloExpress, siga estos pasos:

1. Haga clic en el bot√≥n "Registrarse" en la esquina superior derecha del sitio.
2. Complete el formulario con la siguiente informaci√≥n:
   - Email (ser√° su nombre de usuario para iniciar sesi√≥n)
   - Contrase√±a (m√≠nimo 8 caracteres, debe incluir letras y n√∫meros)
   - Nombre y Apellido
   - N√∫mero de tel√©fono
   - Documento de identidad (formato: V-12345678)
3. Haga clic en "Crear Cuenta".
4. Si todos los datos son correctos, recibir√° un mensaje de confirmaci√≥n y ser√° redirigido a la p√°gina de inicio de sesi√≥n.

> **Nota**: El registro es un requisito para guardar simulaciones de financiamiento y realizar solicitudes, pero no es necesario para navegar por el cat√°logo o usar la calculadora.

### Inicio de Sesi√≥n

Para iniciar sesi√≥n:

1. Haga clic en el bot√≥n "Iniciar Sesi√≥n" en la esquina superior derecha.
2. Ingrese su email y contrase√±a.
3. Haga clic en "Entrar".
4. Una vez autenticado, la interfaz cambiar√° mostrando su email y un bot√≥n para cerrar sesi√≥n.

### Cierre de Sesi√≥n

Para cerrar sesi√≥n, simplemente haga clic en el bot√≥n "Cerrar Sesi√≥n" que aparece cuando est√° autenticado.

### Soluci√≥n de Problemas Comunes

| Problema | Causa Posible | Soluci√≥n |
|----------|---------------|----------|
| No puedo registrarme con mi email | El email ya est√° registrado | Intente recuperar su contrase√±a o use otro email |
| La p√°gina se cierra al intentar registrarme | Problemas con cookies o JavaScript | Aseg√∫rese de tener habilitadas las cookies y JavaScript en su navegador |
| No recuerdo mi contrase√±a | N/A | Pr√≥ximamente implementaremos el sistema de recuperaci√≥n de contrase√±a |

## Panel de Usuario

Una vez que ha iniciado sesi√≥n, tendr√° acceso a su panel de usuario donde podr√°:

1. Ver su informaci√≥n personal
2. Revisar sus simulaciones guardadas
3. Dar seguimiento a sus solicitudes de financiamiento
4. Actualizar sus datos de contacto

> **Nota**: Para mantener la seguridad de su cuenta, le recomendamos cerrar sesi√≥n cuando utilice dispositivos compartidos.

## Sistema de Autenticaci√≥n: Gu√≠a para Usuarios

El sistema de autenticaci√≥n de Ll√©vateloExpress est√° dise√±ado para proporcionar una experiencia segura y f√°cil de usar. A continuaci√≥n se detalla c√≥mo utilizarlo correctamente:

### Beneficios de Registrarse e Iniciar Sesi√≥n

Como usuario registrado y autenticado, usted puede:

1. **Guardar sus simulaciones de financiamiento** para revisarlas posteriormente
2. **Realizar solicitudes formales** de financiamiento
3. **Recibir atenci√≥n personalizada** de nuestros asesores
4. **Acceder a ofertas exclusivas** para clientes registrados
5. **Gestionar m√∫ltiples solicitudes** desde un solo lugar

### Seguridad de su Cuenta

Para proteger su informaci√≥n personal:

- Utilice contrase√±as seguras (m√≠nimo 8 caracteres con letras, n√∫meros y s√≠mbolos)
- No comparta sus credenciales con terceros
- Evite usar la misma contrase√±a que usa en otros servicios
- Cierre sesi√≥n despu√©s de usar el sitio en dispositivos compartidos
- Verifique que la URL sea https://llevateloexpress.com antes de iniciar sesi√≥n

### Gu√≠a Visual del Proceso de Autenticaci√≥n

#### Registrarse como Nuevo Usuario:

1. Haga clic en "Registrarse" en la barra superior
2. Complete todos los campos obligatorios del formulario
3. Revise y acepte los t√©rminos y condiciones
4. Haga clic en "Crear Cuenta"
5. Recibir√° confirmaci√≥n y podr√° iniciar sesi√≥n inmediatamente

#### Iniciar Sesi√≥n:

1. Haga clic en "Iniciar Sesi√≥n" en la barra superior
2. Ingrese su correo electr√≥nico y contrase√±a
3. Haga clic en "Entrar"
4. La barra superior cambiar√° mostrando su correo y la opci√≥n de cerrar sesi√≥n

#### Verificar Estado de Autenticaci√≥n:

Para confirmar que ha iniciado sesi√≥n correctamente, observe:
- Su correo aparecer√° en la barra superior
- El bot√≥n "Cerrar Sesi√≥n" estar√° visible
- Tendr√° acceso a funciones adicionales como guardar simulaciones

## Sistema de Autenticaci√≥n: Gu√≠a para Desarrolladores

Esta secci√≥n est√° dirigida a desarrolladores que necesitan comprender o extender el sistema de autenticaci√≥n.

### Arquitectura del Sistema de Autenticaci√≥n

El sistema de autenticaci√≥n de Ll√©vateloExpress implementa un modelo basado en tokens JWT con protecci√≥n CSRF adicional. La arquitectura incluye:

1. **Frontend (JavaScript)**:
   - M√≥dulo centralizado (`auth.js`) para operaciones de autenticaci√≥n
   - Manejo seguro de tokens JWT en localStorage
   - Actualizaci√≥n din√°mica de la interfaz seg√∫n el estado de autenticaci√≥n

2. **Backend (Django + DRF)**:
   - API RESTful para autenticaci√≥n
   - SimpleJWT para generaci√≥n y validaci√≥n de tokens
   - Middlewares CSRF para protecci√≥n contra ataques

### Ejemplos de C√≥digo para Integraci√≥n

#### Realizar Petici√≥n Autenticada (JavaScript)

Para realizar peticiones que requieren autenticaci√≥n desde el frontend:

```javascript
// Importar m√≥dulo de autenticaci√≥n
import { Auth } from './auth.js';

// Ejemplo: Obtener perfil de usuario
async function getUserProfile() {
    const result = await Auth.fetch('/api/users/profile/');
    
    if (result.success) {
        // Procesar datos del perfil
        const profile = result.data;
        console.log(`Perfil cargado para: ${profile.user.email}`);
        return profile;
    } else {
        // Manejar error
        console.error('Error al cargar perfil:', result.message);
        return null;
    }
}

// Ejemplo: Guardar simulaci√≥n (petici√≥n POST)
async function saveSimulation(simulationData) {
    const result = await Auth.fetch('/api/financing/save-simulation/', {
        method: 'POST',
        body: JSON.stringify(simulationData)
    });
    
    if (result.success) {
        return {
            success: true,
            simulationId: result.data.id
        };
    } else {
        return {
            success: false,
            message: result.message || 'Error al guardar simulaci√≥n'
        };
    }
}
```

#### Proteger una Vista en Django

Para proteger un endpoint del backend:

```python
from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework.permissions import IsAuthenticated
from rest_framework import status

class SavedSimulationsView(APIView):
    """
    Vista para listar las simulaciones guardadas del usuario autenticado
    """
    permission_classes = [IsAuthenticated]
    
    def get(self, request):
        user = request.user
        simulations = Simulation.objects.filter(user=user).order_by('-created_at')
        serializer = SimulationSerializer(simulations, many=True)
        
        return Response({
            'success': True,
            'count': simulations.count(),
            'results': serializer.data
        }, status=status.HTTP_200_OK)
```

### Integraci√≥n en Nuevas P√°ginas

Para integrar el sistema de autenticaci√≥n en nuevas p√°ginas:

1. **Incluir el m√≥dulo de autenticaci√≥n**:
   ```html
   <script type="module">
       import { Auth } from '/js/auth.js';
       
       // Ejecutar al cargar la p√°gina
       document.addEventListener('DOMContentLoaded', async function() {
           // Actualizar UI seg√∫n estado de autenticaci√≥n
           Auth.updateAuthUI();
           
           // Para contenido exclusivo para usuarios autenticados
           if (Auth.isAuthenticated()) {
               // C√≥digo para usuarios autenticados
               loadUserSpecificContent();
           } else {
               // C√≥digo para usuarios no autenticados
               showLoginPrompt();
           }
       });
   </script>
   ```

2. **Utilizar atributos data para control de visibilidad**:
   ```html
   <!-- Solo visible para usuarios autenticados -->
   <div data-auth-container="authenticated">
       <h3>Bienvenido a su panel personal</h3>
       <button id="saveBtn">Guardar configuraci√≥n</button>
   </div>
   
   <!-- Solo visible para usuarios NO autenticados -->
   <div data-auth-container="unauthenticated">
       <p>Inicie sesi√≥n para acceder a todas las funciones</p>
       <a href="/login.html" class="btn btn-primary">Iniciar Sesi√≥n</a>
   </div>
   ```

3. **Realizar peticiones autenticadas**:
   ```javascript
   // Para peticiones que requieren autenticaci√≥n
   async function loadUserData() {
       const result = await Auth.fetch('/api/users/data/');
       
       if (result.success) {
           displayUserData(result.data);
       } else if (result.status === 401) {
           // Sesi√≥n expirada o no autenticado
           redirectToLogin();
       } else {
           showErrorMessage(result.message);
       }
   }
   ```

### Recomendaciones de Seguridad

1. **Nunca almacene informaci√≥n sensible** en localStorage o sessionStorage
2. **Utilice siempre los m√©todos del m√≥dulo Auth** para operaciones de autenticaci√≥n
3. **No modifique los tiempos de expiraci√≥n de tokens** sin razones de seguridad v√°lidas
4. **Incluya siempre el token CSRF** en todas las peticiones POST/PUT/DELETE
5. **Para datos sensibles**, use conexiones HTTPS y cifrado adicional si es necesario

### Pruebas y Depuraci√≥n

Para probar el sistema de autenticaci√≥n:

1. **Verificar logs del navegador**: Los mensajes detallados se registran en la consola
2. **Inspeccionar localStorage**: Comprobar que los tokens se almacenan/eliminan correctamente
3. **Verificar cookies**: La cookie CSRF debe establecerse al cargar la p√°gina
4. **Probar expiraci√≥n de tokens**: Verifique que la renovaci√≥n autom√°tica funciona correctamente

## Preguntas Frecuentes

### Para Usuarios

**¬øEs seguro proporcionar mi informaci√≥n personal?**
S√≠, utilizamos protocolos de seguridad avanzados como HTTPS y autenticaci√≥n JWT para proteger su informaci√≥n.

**¬øPor qu√© necesito crear una cuenta?**
La creaci√≥n de una cuenta nos permite ofrecerle un servicio personalizado, guardar sus simulaciones y procesar sus solicitudes de financiamiento.

**¬øQu√© hago si olvido mi contrase√±a?**
Por el momento, contacte con soporte en soporte@llevateloexpress.com. Pr√≥ximamente implementaremos un sistema de recuperaci√≥n de contrase√±a.

**¬øPuedo usar el mismo correo para varias cuentas?**
No, cada correo electr√≥nico solo puede estar asociado a una cuenta.

### Para Desarrolladores

**¬øC√≥mo implemento una nueva funcionalidad que requiera autenticaci√≥n?**
Utilice el m√≥dulo `Auth.js` para el frontend y las clases de permisos de DRF para el backend.

**¬øC√≥mo puedo depurar problemas de autenticaci√≥n?**
Revise los logs de consola, inspeccione localStorage y cookies, y verifique las respuestas de API.

**¬øEs posible extender el modelo de usuario?**
S√≠, puede extender el modelo de usuario a trav√©s de la aplicaci√≥n `users` y su modelo `Profile`.

**¬øC√≥mo manejo diferentes niveles de permiso?**
Utilice los grupos de Django y permisos personalizados en DRF. 