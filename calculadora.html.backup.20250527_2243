<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Financiamiento | LlévateloExpress</title>
    <link rel="icon" type="image/png" href="static/img/favicon.png">
    <link rel="apple-touch-icon" href="static/img/favicon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="sticky-top">
        <nav class="navbar navbar-expand-lg navbar-light bg-white py-3 shadow-sm">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="img/banners/logo.png" alt="LlévateloExpress" height="40" class="d-inline-block align-middle">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Inicio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="catalogo.html">Catálogo</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="planes.html">Planes de Financiamiento</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="nosotros.html">Nosotros</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contacto.html">Contáctanos</a>
                        </li>
                    </ul>
                    <div class="d-flex">
                        <a href="registro.html" class="btn btn-outline-primary me-2">Registrarse</a>
                        <a href="#" class="btn btn-primary">Iniciar Sesión</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Banner -->
    <section class="page-banner bg-primary text-white py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="display-4 fw-bold mb-3">Calculadora de Financiamiento</h1>
                    <p class="lead mb-0">Simula tu plan de financiamiento y conoce tus opciones de pago</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Calculadora -->
    <section class="calculator py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <div class="card shadow-sm border-0 h-100">
                        <div class="card-header bg-light py-3">
                            <h3 class="h5 mb-0">Selecciona tu Plan</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="radio" name="financingType" id="programadaRadio" value="programada" checked>
                                <label class="form-check-label" for="programadaRadio">
                                    <strong>Compra Programada</strong>
                                    <p class="text-muted small mb-0">Adjudicación al 45% del valor total</p>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="financingType" id="creditoRadio" value="credito">
                                <label class="form-check-label" for="creditoRadio">
                                    <strong>Crédito Inmediato</strong>
                                    <p class="text-muted small mb-0">Entrega inmediata con pago inicial</p>
                                </label>
                            </div>
                            
                            <hr class="my-4">
                            
                            <div class="mb-3">
                                <label for="vehicleType" class="form-label">Tipo de Producto</label>
                                <select class="form-select" id="vehicleType">
                                    <option value="moto">Motocicleta</option>
                                    <option value="vehiculo" selected>Vehículo</option>
                                    <option value="maquinaria">Maquinaria Agrícola</option>
                                </select>
                            </div>
                            
                            <div class="mb-3" id="vehicleModelContainer">
                                <label for="vehicleModel" class="form-label">Modelo</label>
                                <select class="form-select" id="vehicleModel">
                                    <option value="" disabled selected>Selecciona un modelo</option>
                                    <!-- Los modelos se cargarán dinámicamente con JavaScript -->
                                </select>
                            </div>
                            
                            <div class="mb-3" id="customPriceContainer" style="display: none;">
                                <label for="customPrice" class="form-label">Valor del Producto (USD)</label>
                                <div class="input-group">
                                    <span class="input-group-text">$</span>
                                    <input type="number" class="form-control" id="customPrice" min="1000" value="15000">
                                </div>
                            </div>
                            
                            <div class="form-check mb-4">
                                <input class="form-check-input" type="checkbox" id="customPriceCheck">
                                <label class="form-check-label" for="customPriceCheck">
                                    Ingresar valor manualmente
                                </label>
                            </div>
                            
                            <button type="button" id="calculateBtn" class="btn btn-primary w-100">Calcular</button>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-8">
                    <!-- Formulario Compra Programada -->
                    <div id="programadaForm" class="financing-form">
                        <div class="card shadow-sm border-0 mb-4">
                            <div class="card-header bg-primary text-white py-3">
                                <h3 class="h5 mb-0">Compra Programada con Adjudicación al 45%</h3>
                            </div>
                            <div class="card-body p-4">
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <div class="form-floating">
                                            <input type="number" class="form-control" id="initialContribution" min="10" max="15" value="10">
                                            <label for="initialContribution">Aporte Inicial (%)</label>
                                        </div>
                                        <div class="form-text">Entre 10% y 15% del valor del vehículo</div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="number" class="form-control" id="monthlyPayment" min="100" value="300">
                                            <label for="monthlyPayment">Cuota Mensual (USD)</label>
                                        </div>
                                        <div class="form-text">Monto que puedes pagar mensualmente</div>
                                    </div>
                                </div>
                                
                                <div class="form-floating mb-4">
                                    <select class="form-select" id="paymentPunctuality">
                                        <option value="always">Siempre pago a tiempo</option>
                                        <option value="mostly">La mayoría de veces pago a tiempo</option>
                                        <option value="sometimes">A veces me atraso en los pagos</option>
                                    </select>
                                    <label for="paymentPunctuality">Puntualidad en pagos</label>
                                </div>

                                <hr class="my-4">
                                
                                <div id="programadaResults" style="display: none;">
                                    <h4 class="mb-3">Resultados de la Simulación</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="result-item bg-light p-3 rounded h-100">
                                                <h5 class="text-primary">Detalles del Financiamiento</h5>
                                                <ul class="list-unstyled">
                                                    <li class="mb-2"><strong>Valor del vehículo:</strong> <span id="vehicleValue">$0</span></li>
                                                    <li class="mb-2"><strong>Cuota inicial (5%):</strong> <span id="initialFee">$0</span></li>
                                                    <li class="mb-2"><strong>Aporte inicial:</strong> <span id="initialContributionValue">$0</span></li>
                                                    <li class="mb-2"><strong>Monto a financiar hasta adjudicación:</strong> <span id="financeAmount">$0</span></li>
                                                    <li class="mb-2"><strong>Cuota mensual:</strong> <span id="monthlyPaymentValue">$0</span></li>
                                                    <li><strong>Monto post-adjudicación:</strong> <span id="postAdjudicationAmount">$0</span></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="result-item bg-light p-3 rounded h-100">
                                                <h5 class="text-primary">Tiempos Estimados</h5>
                                                <ul class="list-unstyled">
                                                    <li class="mb-2"><strong>Meses hasta adjudicación:</strong> <span id="monthsToAdjudication">0</span></li>
                                                    <li class="mb-2"><strong>Fecha estimada de adjudicación:</strong> <span id="adjudicationDate">--/--/----</span></li>
                                                    <li class="mb-2"><strong>Puntos acumulados:</strong> <span id="accumulatedPoints">0</span></li>
                                                    <li class="mb-2"><strong>Meses reducidos por puntos:</strong> <span id="reducedMonths">0</span></li>
                                                    <li><strong>Fecha final de adjudicación:</strong> <span id="finalAdjudicationDate" class="text-success fw-bold">--/--/----</span></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Gráfico de progreso -->
                                    <div class="mt-4">
                                        <h5>Progreso hacia la Adjudicación</h5>
                                        <div class="progress" style="height: 30px;">
                                            <div id="initialFeeProgress" class="progress-bar bg-success" role="progressbar" style="width: 5%;" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100">5%</div>
                                            <div id="initialContributionProgress" class="progress-bar bg-primary" role="progressbar" style="width: 10%;" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">10%</div>
                                            <div id="monthlyPaymentsProgress" class="progress-bar bg-info" role="progressbar" style="width: 30%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100">30%</div>
                                            <div class="progress-bar bg-light text-dark" role="progressbar" style="width: 55%;" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100">55% restante</div>
                                        </div>
                                        <div class="d-flex justify-content-between mt-2">
                                            <small>0%</small>
                                            <small class="text-primary fw-bold">45% (Adjudicación)</small>
                                            <small>100%</small>
                                        </div>
                                    </div>
                                    
                                    <!-- Call to Action -->
                                    <div class="d-flex flex-wrap gap-2 mt-4 justify-content-center">
                                        <button type="button" class="btn btn-success" id="saveSimulationBtn">
                                            <i class="fas fa-save me-2"></i>Guardar Simulación
                                        </button>
                                        <button type="button" class="btn btn-primary" id="applyNowBtn">
                                            <i class="fas fa-check-circle me-2"></i>Solicitar Este Plan
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" id="shareBtn">
                                            <i class="fas fa-share-alt me-2"></i>Compartir
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Formulario Crédito Inmediato -->
                    <div id="creditoForm" class="financing-form" style="display: none;">
                        <div class="card shadow-sm border-0 mb-4">
                            <div class="card-header bg-primary text-white py-3">
                                <h3 class="h5 mb-0">Crédito de Adjudicación Inmediata</h3>
                            </div>
                            <div class="card-body p-4">
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <div class="form-floating">
                                            <select class="form-select" id="planType">
                                                <option value="basic">Monto a calcular</option>
                                                <option value="intermediate" selected>Monto a calcular</option>
                                                <option value="premium">Monto a calcular</option>
                                            </select>
                                            <label for="planType">Monto Inicial</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <select class="form-select" id="financingTerm">
                                                <option value="6">6 meses</option>
                                                <option value="12">12 meses</option>
                                                <option value="18" selected>18 meses</option>
                                                <option value="24">24 meses</option>
                                            </select>
                                            <label for="financingTerm">Plazo de Financiamiento</label>
                                        </div>
                                    </div>
                                </div>

                                <hr class="my-4">
                                
                                <div id="creditoResults" style="display: none;">
                                    <h4 class="mb-3">Resultados de la Simulación</h4>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <div class="result-item bg-light p-3 rounded h-100">
                                                <h5 class="text-primary">Detalles del Financiamiento</h5>
                                                <ul class="list-unstyled">
                                                    <li class="mb-2"><strong>Valor del vehículo:</strong> <span id="creditoVehicleValue">$0</span></li>
                                                    <li class="mb-2"><strong>Aporte inicial:</strong> <span id="creditoInitialPayment">$0</span></li>
                                                    <li class="mb-2"><strong>Monto a financiar:</strong> <span id="creditoFinanceAmount">$0</span></li>
                                                    <li class="mb-2"><strong>Plazo seleccionado:</strong> <span id="creditoTerm">0 meses</span></li>
                                                    <li class="mb-2"><strong>Cuota mensual:</strong> <span id="creditoMonthlyPayment">$0</span></li>
                                                    <li><strong>Costo total del crédito:</strong> <span id="creditoTotalCost">$0</span></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <div class="result-item bg-light p-3 rounded h-100">
                                                <h5 class="text-primary">Resumen y Tiempos</h5>
                                                <ul class="list-unstyled mb-3">
                                                    <li class="mb-2"><strong>Tiempo de aprobación:</strong> 24-48 horas</li>
                                                    <li class="mb-2"><strong>Entrega del vehículo:</strong> Inmediata (tras aprobación)</li>
                                                    <li class="mb-2"><strong>Fecha de primera cuota:</strong> <span id="creditoFirstPaymentDate">--/--/----</span></li>
                                                    <li class="mb-2"><strong>Fecha estimada de liquidación:</strong> <span id="creditoPayoffDate">--/--/----</span></li>
                                                </ul>
                                                <div class="alert alert-success mt-2 mb-0">
                                                    <i class="fas fa-info-circle me-2"></i>
                                                    <strong>Beneficio:</strong> 
                                                    <span id="creditoBenefit">Recibe tu vehículo de inmediato tras la aprobación del crédito.</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Gráfico de distribución -->
                                    <div class="mt-4">
                                        <h5>Distribución del Financiamiento</h5>
                                        <div class="progress" style="height: 30px;">
                                            <div id="initialPaymentProgress" class="progress-bar bg-success" role="progressbar" style="width: 50%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">50%</div>
                                            <div id="financedAmountProgress" class="progress-bar bg-primary" role="progressbar" style="width: 50%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">50%</div>
                                        </div>
                                        <div class="d-flex justify-content-between mt-2">
                                            <small>0%</small>
                                            <small id="progressMidpoint" class="fw-bold">50%</small>
                                            <small>100%</small>
                                        </div>
                                    </div>
                                    
                                    <!-- Call to Action -->
                                    <div class="d-flex flex-wrap gap-2 mt-4 justify-content-center">
                                        <button type="button" class="btn btn-success" id="creditoSaveBtn">
                                            <i class="fas fa-save me-2"></i>Guardar Simulación
                                        </button>
                                        <button type="button" class="btn btn-primary" id="creditoApplyBtn">
                                            <i class="fas fa-check-circle me-2"></i>Solicitar Este Plan
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary" id="creditoShareBtn">
                                            <i class="fas fa-share-alt me-2"></i>Compartir
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Información Adicional -->
    <section class="additional-info py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-4">Información Adicional</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="text-center mb-3">
                                <i class="fas fa-calculator text-primary" style="font-size: 2.5rem;"></i>
                            </div>
                            <h4 class="card-title text-center mb-3">Fórmulas Utilizadas</h4>
                            <p>Nuestro simulador utiliza fórmulas financieras precisas para calcular tus cuotas mensuales, incluyendo cálculos de interés compuesto y amortización de deuda.</p>
                            <p class="mb-0 text-muted">Las tasas de interés varían según el plan seleccionado y están sujetas a evaluación crediticia.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="text-center mb-3">
                                <i class="fas fa-lightbulb text-primary" style="font-size: 2.5rem;"></i>
                            </div>
                            <h4 class="card-title text-center mb-3">Consejos para Elegir</h4>
                            <ul class="mb-0">
                                <li class="mb-2">Si puedes esperar y ahorrar, la Compra Programada te permite obtener el vehículo pagando solo el 45%.</li>
                                <li class="mb-2">Si necesitas el vehículo de inmediato, el Crédito Inmediato es tu mejor opción.</li>
                                <li>A mayor aporte inicial, menor será tu cuota mensual y el costo total del financiamiento.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="text-center mb-3">
                                <i class="fas fa-question-circle text-primary" style="font-size: 2.5rem;"></i>
                            </div>
                            <h4 class="card-title text-center mb-3">¿Necesitas Ayuda?</h4>
                            <p>Nuestro equipo está disponible para asesorarte en la elección del mejor plan de financiamiento según tus necesidades.</p>
                            <div class="d-grid">
                                <a href="#" class="btn btn-outline-primary">
                                    <i class="fas fa-headset me-2"></i>Contactar Asesor
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonios Rápidos -->
    <section class="testimonials py-5">
        <div class="container">
            <h2 class="text-center mb-4">Lo que Dicen Nuestros Clientes</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="d-flex mb-3">
                                <div class="text-warning">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                            <p class="card-text mb-3">"Gracias a la Compra Programada pude obtener mi Toyota Corolla pagando menos de la mitad. El proceso fue claro y sencillo."</p>
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <img src="img/testimonials/user1.jpg" alt="Carlos Rodríguez" class="rounded-circle" width="50" height="50">
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h5 class="mb-0">Carlos Rodríguez</h5>
                                    <small class="text-muted">Caracas, Venezuela</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="d-flex mb-3">
                                <div class="text-warning">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                            </div>
                            <p class="card-text mb-3">"Necesitaba mi Honda XR150L de inmediato y con el Crédito Inmediato pude tenerla en menos de 48 horas. El servicio fue excelente."</p>
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <img src="img/testimonials/user2.jpg" alt="Ana Martínez" class="rounded-circle" width="50" height="50">
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h5 class="mb-0">Ana Martínez</h5>
                                    <small class="text-muted">Maracaibo, Venezuela</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="d-flex mb-3">
                                <div class="text-warning">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star-half-alt"></i>
                                </div>
                            </div>
                            <p class="card-text mb-3">"La calculadora de financiamiento me ayudó a entender perfectamente mi plan. Ahora disfruto de mi tractor y mi producción ha mejorado notablemente."</p>
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <img src="img/testimonials/user3.jpg" alt="Pedro Gutiérrez" class="rounded-circle" width="50" height="50">
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h5 class="mb-0">Pedro Gutiérrez</h5>
                                    <small class="text-muted">Barinas, Venezuela</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="cta py-5 text-white text-center" style="background-color: #0d6efd;">
        <div class="container">
            <h2 class="display-6 mb-3">¿Listo para financiar tu próximo vehículo?</h2>
            <p class="lead mb-4">Después de simular tu plan, da el siguiente paso y solicita tu financiamiento.</p>
            <div class="d-flex justify-content-center gap-3 flex-wrap">
                <a href="registro.html" class="btn btn-light btn-lg">Crear una Cuenta</a>
                <a href="catalogo.html" class="btn btn-outline-light btn-lg">Ver Catálogo</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer bg-dark text-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4 mb-md-0">
                    <h5 class="mb-3">LlévateloExpress</h5>
                    <p class="mb-3">Tu aliado financiero para la adquisición de vehículos, motocicletas y maquinaria agrícola en Venezuela.</p>
                    <div class="social-links">
                        <a href="#" class="text-white me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="col-md-2 mb-4 mb-md-0">
                    <h5 class="mb-3">Enlaces</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="index.html" class="text-white text-decoration-none">Inicio</a></li>
                        <li class="mb-2"><a href="catalogo.html" class="text-white text-decoration-none">Catálogo</a></li>
                        <li class="mb-2"><a href="planes.html" class="text-white text-decoration-none">Planes</a></li>
                        <li class="mb-2"><a href="nosotros.html" class="text-white text-decoration-none">Nosotros</a></li>
                        <li><a href="contacto.html" class="text-white text-decoration-none">Contáctanos</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4 mb-md-0">
                    <h5 class="mb-3">Contacto</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="fas fa-map-marker-alt me-2"></i> Caracas, Venezuela</li>
                        <li class="mb-2"><i class="fas fa-phone me-2"></i> (0212) 555-1234</li>
                        <li><i class="fas fa-envelope me-2"></i> info@llevateloexpress.com</li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5 class="mb-3">Horario de Atención</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2">Lunes a Viernes: 8:00 AM - 5:00 PM</li>
                        <li>Sábados: 9:00 AM - 1:00 PM</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="mb-0">&copy; 2023 LlévateloExpress. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <a href="#" class="text-white text-decoration-none me-3">Términos y Condiciones</a>
                    <a href="#" class="text-white text-decoration-none">Política de Privacidad</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/products.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elementos del formulario
            const financingType = document.querySelectorAll('input[name="financingType"]');
            const vehicleType = document.getElementById('vehicleType');
            const vehicleModel = document.getElementById('vehicleModel');
            const customPriceCheck = document.getElementById('customPriceCheck');
            const customPriceContainer = document.getElementById('customPriceContainer');
            const customPrice = document.getElementById('customPrice');
            const calculateBtn = document.getElementById('calculateBtn');
            const planType = document.getElementById('planType');
            
            // Inicializar formularios
            const programadaForm = document.getElementById('programadaForm');
            const creditoForm = document.getElementById('creditoForm');
            
            // Mostrar/ocultar formularios según el tipo de financiamiento
            financingType.forEach(type => {
                type.addEventListener('change', function() {
                    if (this.value === 'programada') {
                        programadaForm.style.display = 'block';
                        creditoForm.style.display = 'none';
                    } else {
                        programadaForm.style.display = 'none';
                        creditoForm.style.display = 'block';
                        // Actualizar montos al cambiar a crédito
                        setTimeout(updatePlanDisplay, 100);
                    }
                });
            });
            
            // Manejar el checkbox para ingresar precio personalizado
            if (customPriceCheck) {
                customPriceCheck.addEventListener('change', function() {
                    if (this.checked) {
                        customPriceContainer.style.display = 'block';
                        vehicleModelContainer.style.display = 'none';
                    } else {
                        customPriceContainer.style.display = 'none';
                        vehicleModelContainer.style.display = 'block';
                    }
                    // Actualizar montos cuando cambia el método de precio
                    updatePlanDisplay();
                });
            }
            
            // Cargar modelos disponibles según el tipo de vehículo
            if (vehicleType && vehicleModel) {
                // Cargar modelos iniciales
                populateModelOptions(vehicleType.value);
                
                // Actualizar modelos cuando cambie el tipo
                vehicleType.addEventListener('change', function() {
                    populateModelOptions(this.value);
                });
            }
            
            // Manejar botón de cálculo
            if (calculateBtn) {
                calculateBtn.addEventListener('click', function() {
                    // Determinar qué formulario está activo
                    const activeForm = document.querySelector('input[name="financingType"]:checked').value;
                    
                    if (activeForm === 'programada') {
                        calculateProgramada();
                    } else {
                        calculateCredito();
                    }
                    
                    // Actualizar montos después de calcular
                    updatePlanDisplay();
                });
            }
            
            // Para actualizar la visualización del plan con montos absolutos
            function updatePlanDisplay() {
                // Obtener el valor del vehículo
                let vehicleValue = 0;
                
                if (customPriceCheck && customPriceCheck.checked) {
                    vehicleValue = parseFloat(customPrice.value);
                } else if (vehicleModel && vehicleModel.value) {
                    vehicleValue = parseFloat(vehicleModel.value);
                } else {
                    return; // No hay valor del vehículo disponible
                }
                
                // Actualizar textos de opciones con montos absolutos
                if (planType) {
                    const options = planType.options;
                    const basicAmount = (vehicleValue * 0.45).toLocaleString('es-ES');
                    const intermediateAmount = (vehicleValue * 0.50).toLocaleString('es-ES');
                    const premiumAmount = (vehicleValue * 0.60).toLocaleString('es-ES');
                    
                    options[0].textContent = `$${basicAmount}`;
                    options[1].textContent = `$${intermediateAmount}`;
                    options[2].textContent = `$${premiumAmount}`;
                }
            }
            
            // Agregar eventos para actualizar los montos
            if (vehicleModel) {
                vehicleModel.addEventListener('change', updatePlanDisplay);
            }
            
            if (customPrice) {
                customPrice.addEventListener('input', updatePlanDisplay);
            }
            
            // Verificar si hay un modelo en la URL
            const urlParams = new URLSearchParams(window.location.search);
            const modelId = urlParams.get('modelo');
            if (modelId) {
                selectModelFromId(modelId);
                // Actualizar montos después de cargar el modelo
                setTimeout(updatePlanDisplay, 200);
            } else {
                // Inicializar con valores predeterminados si no hay modelo específico
                setTimeout(updatePlanDisplay, 200);
            }
        });
        
        // Función para poblar el selector de modelos
        function populateModelOptions(vehicleCategory) {
            const vehicleModel = document.getElementById('vehicleModel');
            if (!vehicleModel) return;
            
            // Limpiar opciones actuales
            vehicleModel.innerHTML = '<option value="" disabled selected>Selecciona un modelo</option>';
            
            // Verificar que los productos estén disponibles
            if (!window.products || !Array.isArray(window.products)) {
                console.error('No hay productos disponibles');
                return;
            }
            
            // Filtrar productos por categoría
            let availableProducts = [];
            if (vehicleCategory === 'moto') {
                availableProducts = window.products.filter(product => product.category === 'motocicletas');
            } else if (vehicleCategory === 'vehiculo') {
                availableProducts = window.products.filter(product => product.category === 'vehiculos');
            } else if (vehicleCategory === 'maquinaria') {
                availableProducts = window.products.filter(product => product.category === 'maquinaria');
            }
            
            // Agregar opciones al selector
            if (availableProducts.length === 0) {
                const noOption = document.createElement('option');
                noOption.textContent = 'No hay modelos disponibles en esta categoría';
                noOption.disabled = true;
                vehicleModel.appendChild(noOption);
            } else {
                availableProducts.forEach(product => {
                    const option = document.createElement('option');
                    option.value = product.price;
                    option.dataset.id = product.id;
                    option.dataset.category = product.category;
                    option.textContent = `${product.brand} ${product.name} - $${product.price.toLocaleString()}`;
                    vehicleModel.appendChild(option);
                });
            }
        }
        
        // Seleccionar modelo por ID (para usar desde URL)
        function selectModelFromId(modelId) {
            const id = parseInt(modelId);
            if (!id) return;
            
            // Buscar el producto
            const product = window.products ? window.products.find(p => p.id === id) : null;
            if (!product) return;
            
            // Establecer el tipo de vehículo correcto
            const vehicleType = document.getElementById('vehicleType');
            if (vehicleType) {
                if (product.category === 'motocicletas') {
                    vehicleType.value = 'moto';
                } else if (product.category === 'vehiculos') {
                    vehicleType.value = 'vehiculo';
                } else if (product.category === 'maquinaria') {
                    vehicleType.value = 'maquinaria';
                }
                
                // Actualizar las opciones de modelo
                populateModelOptions(vehicleType.value);
                
                // Esperar a que se carguen las opciones
                setTimeout(() => {
                    // Buscar y seleccionar el modelo
                    const vehicleModel = document.getElementById('vehicleModel');
                    if (vehicleModel) {
                        for (let i = 0; i < vehicleModel.options.length; i++) {
                            if (vehicleModel.options[i].dataset.id == id) {
                                vehicleModel.selectedIndex = i;
                                break;
                            }
                        }
                    }
                }, 100);
            }
        }
        
        // Calcular para Compra Programada
        function calculateProgramada() {
            // Obtener valores del formulario
            let vehicleValue = 0;
            
            if (document.getElementById('customPriceCheck').checked) {
                vehicleValue = parseFloat(document.getElementById('customPrice').value);
            } else {
                const vehicleModel = document.getElementById('vehicleModel');
                vehicleValue = parseFloat(vehicleModel.value);
            }
            
            const initialContributionPercent = parseFloat(document.getElementById('initialContribution').value);
            const monthlyPayment = parseFloat(document.getElementById('monthlyPayment').value);
            const punctuality = document.getElementById('paymentPunctuality').value;
            
            // Validar que los valores sean numéricos
            if (isNaN(vehicleValue) || isNaN(initialContributionPercent) || isNaN(monthlyPayment)) {
                alert('Por favor, introduce valores válidos');
                return;
            }
            
            // Calcular valores
            const initialFee = vehicleValue * 0.05; // 5% cuota inicial
            const initialContribution = (vehicleValue * initialContributionPercent) / 100; // Aporte inicial
            const totalInitialPayment = initialFee + initialContribution; // Total pagado inicialmente
            const remainingToAdjudication = (vehicleValue * 0.45) - totalInitialPayment; // Falta para adjudicación (45%)
            const monthsToAdjudication = Math.ceil(remainingToAdjudication / monthlyPayment); // Meses hasta adjudicación
            
            // Calcular puntos por puntualidad
            let points = 0;
            if (punctuality === 'always') {
                points = monthsToAdjudication * 2; // 2 puntos por mes si siempre paga a tiempo
            } else if (punctuality === 'mostly') {
                points = Math.floor(monthsToAdjudication * 1.5); // 1.5 puntos por mes si casi siempre paga a tiempo
            } else {
                points = monthsToAdjudication; // 1 punto por mes si a veces se atrasa
            }
            
            // Calcular reducción de meses por puntos
            const reducedMonths = Math.floor(points / 20); // Cada 20 puntos reduce 1 mes
            const finalMonthsToAdjudication = Math.max(1, monthsToAdjudication - reducedMonths);
            
            // Calcular fechas
            const today = new Date();
            const adjudicationDate = new Date(today);
            adjudicationDate.setMonth(today.getMonth() + monthsToAdjudication);
            
            const finalAdjudicationDate = new Date(today);
            finalAdjudicationDate.setMonth(today.getMonth() + finalMonthsToAdjudication);
            
            // Calcular monto post-adjudicación
            const postAdjudicationAmount = vehicleValue * 0.55; // 55% del valor total
            
            // Actualizar la interfaz con los resultados
            document.getElementById('vehicleValue').textContent = `$${vehicleValue.toLocaleString()}`;
            document.getElementById('initialFee').textContent = `$${initialFee.toLocaleString()}`;
            document.getElementById('initialContributionValue').textContent = `$${initialContribution.toLocaleString()}`;
            document.getElementById('financeAmount').textContent = `$${remainingToAdjudication.toLocaleString()}`;
            document.getElementById('monthlyPaymentValue').textContent = `$${monthlyPayment.toLocaleString()}`;
            document.getElementById('postAdjudicationAmount').textContent = `$${postAdjudicationAmount.toLocaleString()}`;
            
            document.getElementById('monthsToAdjudication').textContent = monthsToAdjudication;
            document.getElementById('adjudicationDate').textContent = formatDate(adjudicationDate);
            document.getElementById('accumulatedPoints').textContent = points;
            document.getElementById('reducedMonths').textContent = reducedMonths;
            document.getElementById('finalAdjudicationDate').textContent = formatDate(finalAdjudicationDate);
            
            // Actualizar la barra de progreso
            const initialFeePercentage = 5;
            const initialContributionPercentage = initialContributionPercent;
            const monthlyPaymentsPercentage = 45 - initialFeePercentage - initialContributionPercentage;
            
            document.getElementById('initialFeeProgress').style.width = `${initialFeePercentage}%`;
            document.getElementById('initialFeeProgress').textContent = `${initialFeePercentage}%`;
            
            document.getElementById('initialContributionProgress').style.width = `${initialContributionPercentage}%`;
            document.getElementById('initialContributionProgress').textContent = `${initialContributionPercentage}%`;
            
            document.getElementById('monthlyPaymentsProgress').style.width = `${monthlyPaymentsPercentage}%`;
            document.getElementById('monthlyPaymentsProgress').textContent = `${monthlyPaymentsPercentage}%`;
            
            // Mostrar resultados
            document.getElementById('programadaResults').style.display = 'block';
        }
        
        // Calcular para Crédito Inmediato
        function calculateCredito() {
            // Obtener valores del formulario
            let vehicleValue = 0;
            
            if (document.getElementById('customPriceCheck').checked) {
                vehicleValue = parseFloat(document.getElementById('customPrice').value);
            } else {
                const vehicleModel = document.getElementById('vehicleModel');
                vehicleValue = parseFloat(vehicleModel.value);
            }
            
            const planType = document.getElementById('planType').value;
            const financingTerm = parseInt(document.getElementById('financingTerm').value);
            
            // Validar que los valores sean numéricos
            if (isNaN(vehicleValue) || isNaN(financingTerm)) {
                alert('Por favor, introduce valores válidos');
                return;
            }
            
            // Determinar porcentaje inicial según el plan
            let initialPercentage = 0;
            
            if (planType === 'basic') {
                initialPercentage = 0.45; // 45% inicial
            } else if (planType === 'intermediate') {
                initialPercentage = 0.50; // 50% inicial
            } else {
                initialPercentage = 0.60; // 60% inicial
            }
            
            // Calcular valores
            const initialPayment = vehicleValue * initialPercentage;
            const financeAmount = vehicleValue - initialPayment;
            
            // Calcular cuota mensual (simplemente dividiendo el monto entre el plazo)
            const monthlyPayment = financeAmount / financingTerm;
            
            // Calcular costo total
            const totalPayment = monthlyPayment * financingTerm;
            const totalCost = initialPayment + totalPayment;
            
            // Calcular fechas
            const today = new Date();
            const firstPaymentDate = new Date(today);
            firstPaymentDate.setMonth(today.getMonth() + 1);
            
            const payoffDate = new Date(today);
            payoffDate.setMonth(today.getMonth() + financingTerm);
            
            // Actualizar la interfaz con los resultados
            document.getElementById('creditoVehicleValue').textContent = `$${vehicleValue.toLocaleString()}`;
            document.getElementById('creditoInitialPayment').textContent = `$${initialPayment.toLocaleString()}`;
            document.getElementById('creditoFinanceAmount').textContent = `$${financeAmount.toLocaleString()}`;
            document.getElementById('creditoTerm').textContent = `${financingTerm} meses`;
            document.getElementById('creditoMonthlyPayment').textContent = `$${monthlyPayment.toLocaleString(undefined, {maximumFractionDigits: 2})}`;
            document.getElementById('creditoTotalCost').textContent = `$${totalCost.toLocaleString(undefined, {maximumFractionDigits: 2})}`;
            
            document.getElementById('creditoFirstPaymentDate').textContent = formatDate(firstPaymentDate);
            document.getElementById('creditoPayoffDate').textContent = formatDate(payoffDate);
            
            // Actualizar beneficio según el plan
            let benefitText = "";
            if (planType === 'basic') {
                benefitText = "Plan con menor inicial y mayor plazo de pago.";
            } else if (planType === 'intermediate') {
                benefitText = "Balance perfecto entre inicial y cuotas mensuales.";
            } else {
                benefitText = "Mayor inicial con menor plazo y cuotas más bajas.";
            }
            document.getElementById('creditoBenefit').textContent = benefitText;
            
            // Actualizar la barra de progreso
            document.getElementById('initialPaymentProgress').style.width = `${initialPercentage * 100}%`;
            document.getElementById('initialPaymentProgress').textContent = `${(initialPercentage * 100).toFixed(0)}%`;
            
            document.getElementById('financedAmountProgress').style.width = `${(1 - initialPercentage) * 100}%`;
            document.getElementById('financedAmountProgress').textContent = `${((1 - initialPercentage) * 100).toFixed(0)}%`;
            
            document.getElementById('progressMidpoint').textContent = `${(initialPercentage * 100).toFixed(0)}%`;
            
            // Mostrar resultados
            document.getElementById('creditoResults').style.display = 'block';
        }
        
        // Función para formatear fechas
        function formatDate(date) {
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return date.toLocaleDateString('es-VE', options);
        }
    </script>
</body>
</html> 